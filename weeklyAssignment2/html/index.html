<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
        <title>Home | WA2 | Crownstack</title>
        <link rel="stylesheet" type="text/css" media="screen" href="../css/main.css">
        <link rel="stylesheet" type="text/css" media="screen" href="../css/index.css">
    </head>
    <body>
        <div class="home-main">
            <!-- navbar starts -->
            <header class="navbar">
                <div class="nav-right">
                    <a href="#">Crownstack Weekly Assignment 2</a>
                </div>
                <div class="nav-left">
                    <a href="../html/login.html">
                        <span id="name"></span>
                        <img class="user-logo" src="../img/user.png" alt="user logo">
                    </a>
                </div>
            </header>
            <!-- navbar ends-->

            <!--main-content starts-->
            <div class="container">
                <div class="sidebar">
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Contact</a></li>
                        <li id="logout"><a href="#" onclick="onLogout()">Logout</a></li>
                    </ul>
                </div>
                <div class="content">
                    <h1>Welcome to the Weekly Assignment 2</h1>
                    <p class="paragraph">
                        Hello! User, Welcome to the assignment task for week 2 given by vinay kumar, a senior
                        lead developer given to shiv raj bhagat a software developer trainee of the crownstack.
                        This tasks include the login and sign up page also a home page all this feature of data
                        storing is acheived with the help of localstorage of browser
                    </p>
                    <ul>
                        <li>After signup it redirects you to index page</li>
                        <li>After login it redirects you to index page</li>
                        <li>After login you, see the change in login where now name is displayed.</li>
                        <li>Sidebar has logout if login is true else there's no logout function</li>
                        <li>Alert message is added for Successfully login and signup</li>
                        <li>You cannot got to login and signup, if you're logged in</li>
                    </ul>
                    <h4>Structure of localStorage</h5>
                    <pre>
                        formData: {
                            name:
                            password:
                            email:
                            dob:
                            gender:
                            phone:
                            login:
                        }
                    </pre>
                </div>
            </div>
            <!--main-content ends-->

            <!--footer starts-->
            <footer class="footer">
                <p>&#169; Copyright by Crownstack | Shiv Raj Bhagat</p>
            </footer>
            <!--footer ends-->
        </div>
        <script>
            const user = (() => {
                const fieldValue = localStorage.getItem('users');
                return fieldValue === null
                ? []
                : JSON.parse(fieldValue);
            })();

            let name;
            let login = localStorage.getItem("login") === "true" ? true : false;
            let pointer = localStorage.getItem("pointer");

            if(user.length && pointer){ 
                name = user[pointer].name;         
                if(login) {
                    document.getElementById("name").innerHTML = name;
                }
            } 

            if( !name || !(login) ) {
                document.getElementById("name").innerHTML = "Login";
                let logout = document.getElementById("logout");
                logout.remove();
            }
            
            function onLogout() {
                localStorage.setItem('login', false);
                location.reload();
            }
        </script>
    </body>
</html>